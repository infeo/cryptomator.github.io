const SUBSCRIBE_NEWSLETTER_URL='https://api.cryptomator.org/mailtrain/subscribe.php';class Newsletter{constructor(a,b){this._form=a,this._data=b}subscribe(){if(!$(this._form)[0].checkValidity()){$(this._form).find(':input').addClass('show-invalid');return}this._data.inProgress=!0,this._data.errorMessage='',this._data.success=!1,$.ajax({url:SUBSCRIBE_NEWSLETTER_URL,type:'GET',xhrFields:{withCredentials:!0}}).done(a=>{$.ajax({url:SUBSCRIBE_NEWSLETTER_URL,type:'POST',data:{email:this._data.email},xhrFields:{withCredentials:!0}}).done(a=>{this.onSubscribeSucceeded()}).fail(a=>{this.onSubscribeFailed(a.responseJSON?.message||'Subscribing to newsletter failed.')})}).fail(a=>{this.onSubscribeFailed(a.responseJSON?.message||'Subscribing to newsletter failed.')})}onSubscribeFailed(a){this._data.success=!1,this._data.errorMessage=a,this._data.inProgress=!1}onSubscribeSucceeded(){this._data.success=!0,this._data.errorMessage='',this._data.inProgress=!1}}